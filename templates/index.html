{% extends 'layout.html' %}
{% block content %}
<h1 class='mb-3'>Student Dashboard</h1>
<div class='mb-3 text-end'>
  <a class='btn btn-success' href='{{ url_for('add_student') }}'>+ Add Student</a>
</div>
{% if students %}
  <table class='table table-striped table-hover'>
    <thead><tr><th>#</th><th>Name</th><th>Grade</th><th>Section</th><th>Email</th><th>Added</th><th>Actions</th></tr></thead>
    <tbody>
      {% for s in students %}
        <tr>
          <td>{{ loop.index }}</td><td>{{ s.first_name }} {{ s.last_name }}</td><td>{{ s.grade }}</td><td>{{ s.section }}</td><td>{{ s.email }}</td><td>{{ s.created_at.strftime('%Y-%m-%d %H:%M') }}</td>
          <td>
            <a class='btn btn-sm btn-primary' href='{{ url_for('edit_student', student_id=s.id) }}'>Edit</a>
            <form method='post' action='{{ url_for('delete_student', student_id=s.id) }}' style='display:inline' onsubmit="return confirm('Delete this student?');">
              <button class='btn btn-sm btn-danger'>Delete</button>
            </form>
          </td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
{% else %}<p>No students yet.</p>{% endif %}
{% endblock %}
